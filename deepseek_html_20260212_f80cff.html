<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Certification Alignment ¬∑ Tailwind + Cards</title>
  <!-- Tailwind via CDN (lightweight, v3) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- custom subtle extension -->
  <style>
    /* minimal overrides ‚Äì keep gradient header, smooth interactions */
    .table-sortable::after {
      content: ' ‚Üï';
      opacity: 0.5;
      font-size: 0.9em;
      margin-left: 0.25rem;
      display: inline-block;
    }
    .table-sort-asc::after {
      content: ' ‚Üë';
      opacity: 1;
    }
    .table-sort-desc::after {
      content: ' ‚Üì';
      opacity: 1;
    }
    /* card hover effect only on mobile card view */
    @media (max-width: 639px) {
      .cert-card {
        transition: all 0.2s ease;
      }
      .cert-card:hover {
        transform: scale(1.01);
        box-shadow: 0 10px 25px -5px rgba(59,130,246,0.2);
      }
    }
    /* ensure badges stay inline */
    .badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-weight: 600;
      font-size: 0.75rem;
      margin-left: 0.5rem;
      white-space: nowrap;
    }
    .badge-priority {
      background-color: #fee2e2;
      color: #991b1b;
    }
    .badge-recommended {
      background-color: #dbeafe;
      color: #1e40af;
    }
    /* keep table header sticky look */
    th {
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    /* container shadow refine */
    .matrix-shadow {
      box-shadow: 0 20px 60px rgba(0,0,0,0.25);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-[#667eea] to-[#764ba2] p-3 md:p-5 font-sans min-h-screen antialiased">

  <!-- main container ‚Äì white card with soft overflow -->
  <div class="max-w-7xl mx-auto bg-white rounded-xl matrix-shadow overflow-hidden md:rounded-2xl">

    <!-- header ‚Äì gradient deep blue/indigo -->
    <header class="bg-gradient-to-r from-[#1e3a8a] to-[#3b82f6] px-5 py-6 md:px-8 md:py-7 text-white">
      <h1 class="text-2xl md:text-3xl font-bold tracking-tight flex items-center gap-2">üéì Certification Alignment Matrix</h1>
      <p class="text-indigo-100 text-sm md:text-base mt-1 opacity-90">Enterprise Training & Professional Development Requirements</p>
    </header>

    <!-- stats area ‚Äì clean flex, responsive -->
    <div class="bg-gray-100 px-5 py-5 md:px-8 flex flex-wrap justify-around gap-4">
      <div class="text-center">
        <div class="text-2xl md:text-3xl font-bold text-blue-600" id="totalCerts">0</div>
        <div class="text-xs uppercase tracking-wider text-gray-600 mt-1">Total Certifications</div>
      </div>
      <div class="text-center">
        <div class="text-2xl md:text-3xl font-bold text-blue-600" id="totalCost">‚Ç±0</div>
        <div class="text-xs uppercase tracking-wider text-gray-600 mt-1">Total Investment</div>
      </div>
      <div class="text-center">
        <div class="text-2xl md:text-3xl font-bold text-blue-600" id="visibleCerts">0</div>
        <div class="text-xs uppercase tracking-wider text-gray-600 mt-1">Showing</div>
      </div>
    </div>

    <!-- controls: fully responsive, stack on mobile, tailwind spacing -->
    <div class="bg-gray-50 px-5 py-5 md:px-8 border-b border-gray-200 flex flex-col sm:flex-row gap-4 items-start sm:items-center">
      <!-- search - grows -->
      <div class="w-full sm:flex-1">
        <input type="text" id="searchInput" placeholder="üîç Search department, task, vendor, cert..." 
               class="w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition text-sm">
      </div>
      <!-- filter group inline on small+ -->
      <div class="flex flex-wrap items-center gap-3 w-full sm:w-auto">
        <div class="flex items-center gap-2">
          <label for="deptFilter" class="text-xs font-semibold text-gray-700 whitespace-nowrap">Dept:</label>
          <select id="deptFilter" class="border-2 border-gray-300 rounded-lg px-3 py-2 text-sm bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-200">
            <option value="">All Departments</option>
          </select>
        </div>
        <div class="flex items-center gap-2">
          <label for="vendorFilter" class="text-xs font-semibold text-gray-700 whitespace-nowrap">Vendor:</label>
          <select id="vendorFilter" class="border-2 border-gray-300 rounded-lg px-3 py-2 text-sm bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-200">
            <option value="">All Vendors</option>
          </select>
        </div>
        <button onclick="resetFilters()" class="bg-red-600 hover:bg-red-700 text-white text-sm font-semibold px-5 py-2 rounded-lg transition w-full sm:w-auto">
          Reset
        </button>
      </div>
    </div>

    <!-- =========== TABLE VIEW (hidden on mobile, shown on md+) ========== -->
    <div class="hidden md:block px-6 py-6 lg:px-8 overflow-x-auto">
      <table class="w-full border-collapse table-fixed">
        <thead>
          <tr class="bg-gradient-to-r from-[#1e40af] to-[#3b82f6] text-white">
            <th class="p-4 text-left text-xs font-semibold uppercase tracking-wider cursor-pointer table-sortable" data-column="department" onclick="sortTable('department')">Department</th>
            <th class="p-4 text-left text-xs font-semibold uppercase tracking-wider">Task / Skill Requirement</th>
            <th class="p-4 text-left text-xs font-semibold uppercase tracking-wider cursor-pointer table-sortable" data-column="vendor" onclick="sortTable('vendor')">Vendor</th>
            <th class="p-4 text-left text-xs font-semibold uppercase tracking-wider cursor-pointer table-sortable" data-column="certification" onclick="sortTable('certification')">Certification</th>
            <th class="p-4 text-center text-xs font-semibold uppercase tracking-wider cursor-pointer table-sortable" data-column="cost" onclick="sortTable('cost')">Cost</th>
            <th class="p-4 text-left text-xs font-semibold uppercase tracking-wider">Justification</th>
          </tr>
        </thead>
        <tbody id="tableBody" class="text-sm"></tbody>
      </table>
      <!-- no results row inside table? we handle with separate div (same as original) -->
    </div>

    <!-- =========== CARD LAYOUT for MOBILE (‚â§ 639px) ========== -->
    <div id="mobileCardContainer" class="block md:hidden px-4 py-5 space-y-4 bg-gray-50/50">
      <!-- dynamic cards will be injected here -->
    </div>
    
    <!-- unified no-results message (hidden by default) works for both views -->
    <div id="noResults" class="hidden text-center py-14 px-4 text-gray-500 text-base bg-white">
      üßê No certifications found matching your criteria.
    </div>

    <!-- footer -->
    <footer class="bg-gray-100 px-6 py-4 text-center text-xs md:text-sm text-gray-600 border-t border-gray-200">
      <p>Last Updated: February 2026 ¬∑ Tailwind + Card layout</p>
    </footer>
  </div>

  <script>
    // ---------- ORIGINAL CERTIFICATION DATA (preserved) ----------
    const certifications = [
      { department: 'Software Development Innovation', task: `Security Fundamentals`, vendor: 'CompTIA', certification: 'CompTIA Security+<br><span class="badge badge-priority">Priority</span>', cost: 23028, justification: 'Required for implementing secure development practices and understanding vulnerabilities' },
      { department: 'Software Development Innovation', task: `Cloud Application Development`, vendor: 'Amazon Web Services', certification: 'AWS Certified Developer - Associate<br><span class="badge badge-recommended">Recommended</span>', cost: 8550, justification: 'Essential for building scalable cloud-native solutions on AWS' },
      { department: 'Software Development Innovation', task: `Scalable Application Design`, vendor: 'Google Cloud', certification: 'Professional Cloud Developer<br><span class="badge badge-recommended">Recommended</span>', cost: 11400, justification: 'Critical for designing and deploying enterprise applications on Google Cloud' },
      { department: 'IT', task: `Hardware and Technical Support`, vendor: 'CompTIA', certification: 'CompTIA A+<br><span class="badge badge-priority">Priority</span>', cost: 14022, justification: 'Foundation for IT support roles and troubleshooting capabilities' },
      { department: 'IT', task: `IT Service Management`, vendor: 'AXELOS', certification: 'ITIL 4 Foundation<br><span class="badge badge-recommended">Recommended</span>', cost: 23370, justification: 'Essential for aligning IT operations with business objectives and service quality' },
      { department: 'Software Development Innovation', task: `Cloud-Native Application Development`, vendor: 'Linux Foundation', certification: 'Certified Kubernetes Application Developer (CKAD)<br><span class="badge badge-recommended">Recommended</span>', cost: 22515, justification: 'Essential for building and deploying containerized applications in our modern infrastructure' },
      { department: 'Software Development Innovation', task: `Machine Learning Engineering`, vendor: 'Google Cloud', certification: 'Professional Machine Learning Engineer<br><span class="badge badge-recommended">Recommended</span>', cost: 11400, justification: 'Critical for developing AI-powered features and intelligent applications in our product roadmap' },
      { department: 'IT', task: `Linux System Administration`, vendor: 'Linux Professional Institute', certification: 'LPIC-1: Linux Administrator<br><span class="badge badge-recommended">Recommended</span>', cost: 11400, justification: 'Essential for managing our enterprise Linux servers and infrastructure' },
      { department: 'IT', task: `Virtualization Infrastructure Management`, vendor: 'VMware', certification: 'VMware Certified Professional - Data Center Virtualization (VCP-DCV)<br><span class="badge badge-recommended">Recommended</span>', cost: 14250, justification: 'Critical for managing our VMware vSphere virtualization environment' },
      { department: 'IT', task: `Cloud Database Administration`, vendor: 'Microsoft', certification: 'Azure Database Administrator Associate<br><span class="badge badge-recommended">Recommended</span>', cost: 9405, justification: 'Essential for managing and optimizing our Azure database infrastructure' }
    ];

    // ---------- state & helpers (fully compatible) ----------
    let filteredData = [...certifications];
    let currentSort = { column: null, direction: null };

    function formatCurrency(amount) {
      return '‚Ç±' + amount.toLocaleString();
    }

    // ----- populate dropdowns (departments & vendors) -----
    function populateFilters() {
      const departments = [...new Set(certifications.map(c => c.department))].sort();
      const vendors = [...new Set(certifications.map(c => c.vendor))].sort();
      const deptFilter = document.getElementById('deptFilter');
      const vendorFilter = document.getElementById('vendorFilter');
      departments.forEach(dept => {
        const option = document.createElement('option');
        option.value = dept; option.textContent = dept;
        deptFilter.appendChild(option);
      });
      vendors.forEach(vendor => {
        const option = document.createElement('option');
        option.value = vendor; option.textContent = vendor;
        vendorFilter.appendChild(option);
      });
    }

    // ----- RENDER TWIN VIEWS: table (desktop) + cards (mobile) -----
    function renderAllViews(data) {
      const tbody = document.getElementById('tableBody');
      const mobileContainer = document.getElementById('mobileCardContainer');
      const noResultsDiv = document.getElementById('noResults');

      // clear both
      if (tbody) tbody.innerHTML = '';
      if (mobileContainer) mobileContainer.innerHTML = '';

      if (!data || data.length === 0) {
        noResultsDiv.classList.remove('hidden');
        updateStats(0, 0);
        return;
      }
      noResultsDiv.classList.add('hidden');

      // ----- 1. render table rows (DESKTOP) -----
      data.forEach(cert => {
        const row = document.createElement('tr');
        row.className = 'border-b border-gray-200 even:bg-gray-50/80 hover:bg-blue-50/50 transition';
        row.innerHTML = `
          <td class="p-4 align-top text-blue-900 font-semibold" data-label="Dept">${cert.department}</td>
          <td class="p-4 align-top text-gray-800 text-sm leading-relaxed" data-label="Task">${cert.task}</td>
          <td class="p-4 align-top text-emerald-700 font-medium" data-label="Vendor">${cert.vendor}</td>
          <td class="p-4 align-top text-indigo-700 font-semibold" data-label="Certification">${cert.certification}</td>
          <td class="p-4 align-top text-red-700 font-bold text-center" data-label="Cost">${formatCurrency(cert.cost)}</td>
          <td class="p-4 align-top text-gray-600 text-sm leading-relaxed" data-label="Justification">${cert.justification}</td>
        `;
        if (tbody) tbody.appendChild(row);
      });

      // ----- 2. render CARDS for mobile (Tailwind styled, modern card grid) -----
      data.forEach(cert => {
        const card = document.createElement('div');
        card.className = 'cert-card bg-white border border-gray-200 rounded-xl p-5 shadow-sm flex flex-col gap-3';
        
        // extract clean text for cost (no HTML)
        const costFormatted = formatCurrency(cert.cost);
        
        // Department + vendor as header line
        const deptSpan = `<span class="text-blue-800 font-bold text-base">${cert.department}</span>`;
        const vendorSpan = `<span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-medium">${cert.vendor}</span>`;
        
        // task with icon
        const taskHtml = `<div class="text-sm"><span class="font-semibold text-gray-700">üìã Task:</span> ${cert.task}</div>`;
        
        // certification (including badges)
        const certHtml = `<div class="flex flex-wrap items-baseline gap-1"><span class="font-semibold text-gray-700">üèÖ Cert:</span> <span class="text-indigo-700 font-medium">${cert.certification}</span></div>`;
        
        // cost row
        const costHtml = `<div class="flex items-center gap-2"><span class="font-semibold text-gray-700">üí∞ Cost:</span> <span class="text-red-600 font-bold text-base">${costFormatted}</span></div>`;
        
        // justification ‚Äì slightly muted bg
        const justHtml = `<div class="bg-gray-50 p-3 rounded-lg text-xs text-gray-700 border-l-4 border-blue-300 italic">‚Äú${cert.justification}‚Äù</div>`;
        
        card.innerHTML = `
          <div class="flex flex-wrap items-center justify-between gap-2">
            ${deptSpan}
            ${vendorSpan}
          </div>
          <div class="flex flex-col gap-1.5">
            ${taskHtml}
            ${certHtml}
            ${costHtml}
          </div>
          ${justHtml}
        `;
        mobileContainer.appendChild(card);
      });

      // update stats
      const totalCost = data.reduce((sum, cert) => sum + cert.cost, 0);
      updateStats(data.length, totalCost);
    }

    // stats update (total certs, total cost, visible)
    function updateStats(visible, visibleCost) {
      const totalCostAll = certifications.reduce((sum, cert) => sum + cert.cost, 0);
      document.getElementById('totalCerts').textContent = certifications.length;
      document.getElementById('totalCost').textContent = formatCurrency(totalCostAll);
      document.getElementById('visibleCerts').textContent = visible;
    }

    // ----- SORT logic (exactly as original, but we call renderAllViews) -----
    function sortTable(column) {
      if (currentSort.column === column) {
        if (currentSort.direction === 'asc') currentSort.direction = 'desc';
        else if (currentSort.direction === 'desc') { currentSort.direction = null; currentSort.column = null; }
        else currentSort.direction = 'asc';
      } else {
        currentSort.column = column;
        currentSort.direction = 'asc';
      }

      // update sort icons (desktop only, but we keep it)
      document.querySelectorAll('th.table-sortable').forEach(th => {
        th.classList.remove('table-sort-asc', 'table-sort-desc');
      });
      if (currentSort.column) {
        const th = document.querySelector(`th[data-column="${column}"]`);
        if (th) {
          if (currentSort.direction === 'asc') th.classList.add('table-sort-asc');
          else if (currentSort.direction === 'desc') th.classList.add('table-sort-desc');
        }
      }

      // apply sort on filteredData
      if (currentSort.column && currentSort.direction) {
        filteredData.sort((a, b) => {
          let aVal = a[column];
          let bVal = b[column];
          if (column === 'cost') {
            aVal = Number(aVal); bVal = Number(bVal);
          } else {
            aVal = String(aVal).toLowerCase().replace(/<[^>]*>/g, '');
            bVal = String(bVal).toLowerCase().replace(/<[^>]*>/g, '');
          }
          if (aVal < bVal) return currentSort.direction === 'asc' ? -1 : 1;
          if (aVal > bVal) return currentSort.direction === 'asc' ? 1 : -1;
          return 0;
        });
      } else {
        // if no sort, revert to filter without sort
        applyFilters(false); 
        return;
      }
      renderAllViews(filteredData);
    }

    // ----- FILTER (search + dropdown) -----
    function applyFilters(resetSort = true) {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const deptFilter = document.getElementById('deptFilter').value;
      const vendorFilter = document.getElementById('vendorFilter').value;

      filteredData = certifications.filter(cert => {
        const taskText = cert.task.replace(/<[^>]*>/g, '').toLowerCase();
        const certText = cert.certification.replace(/<[^>]*>/g, '').toLowerCase();
        const matchesSearch = !searchTerm ||
          cert.department.toLowerCase().includes(searchTerm) ||
          taskText.includes(searchTerm) ||
          cert.vendor.toLowerCase().includes(searchTerm) ||
          certText.includes(searchTerm) ||
          cert.justification.toLowerCase().includes(searchTerm);
        const matchesDept = !deptFilter || cert.department === deptFilter;
        const matchesVendor = !vendorFilter || cert.vendor === vendorFilter;
        return matchesSearch && matchesDept && matchesVendor;
      });

      // if a sort is active, reapply it on filteredData, else plain render
      if (currentSort.column && currentSort.direction) {
        sortTable(currentSort.column); // this calls renderAllViews inside
      } else {
        renderAllViews(filteredData);
      }
    }

    // reset everything
    function resetFilters() {
      document.getElementById('searchInput').value = '';
      document.getElementById('deptFilter').value = '';
      document.getElementById('vendorFilter').value = '';
      currentSort.column = null;
      currentSort.direction = null;
      document.querySelectorAll('th.table-sortable').forEach(th => {
        th.classList.remove('table-sort-asc', 'table-sort-desc');
      });
      applyFilters();
    }

    // attach listeners
    document.getElementById('searchInput').addEventListener('input', applyFilters);
    document.getElementById('deptFilter').addEventListener('change', applyFilters);
    document.getElementById('vendorFilter').addEventListener('change', applyFilters);

    // expose global for onclick
    window.sortTable = sortTable;
    window.resetFilters = resetFilters;

    // init
    populateFilters();
    renderAllViews(certifications);
  </script>

  <!-- ensure mobile card container exists if JS fails? already in HTML -->
  <!-- fine-tune: mobile container empty fallback -->
  <script>
    (function ensureMobileContainer() {
      if (!document.getElementById('mobileCardContainer')) {
        const container = document.createElement('div');
        container.id = 'mobileCardContainer';
        container.className = 'block md:hidden px-4 py-5 space-y-4';
        const tableContainer = document.querySelector('.md\\:block');
        if (tableContainer) tableContainer.insertAdjacentElement('afterend', container);
      }
    })();
  </script>
</body>
</html>